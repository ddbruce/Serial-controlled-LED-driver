<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
	<title>157 Third Street</title>
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/chromoselector.css">
	<script src="js/jquery-1.10.2.min.js"></script>
	<script src="js/chromoselector.min.js"></script>
	<script>
	$(document).bind('touchmove', function(e) {
		e.preventDefault();
	});
	function colorbg(id){
		var color = $(id).chromoselector('getColor');
		$(id).css({
			'background-color': color.getHexString(),
			'color': color.getHexString()
		});
	}	
	function postphp() {
		var ch1 = $("#ch1").val();
		var ch2 = $("#ch2").val();
		var ch3 = $("#ch3").val();
		var ch4 = $("#ch4").val();
		var ch5 = $("#ch5").val();
		//console.log(ch1 + "," + ch2 + "," + ch3 + "," + ch4 + "," + ch5);
		$.ajax({
			url : "change.php",
			type: "POST",
			data: {
				ch1: ch1,
				ch2: ch2,
				ch3: ch3,
				ch4: ch4,
				ch5: ch5
			},
			success: function(data) {
				$("#simple-msg").html('<pre><code>' + data +  '</code></pre>');
			}
		});
	}
	$(document).ready(function (){
		$.fn.chromoselector
		.defaults("width", 180)
		.defaults("ringwidth", 50)
		.defaults("resizable", false)
		.defaults("speed", 250)

		$("#ch1").chromoselector({
			create: function() {
				colorbg(this);
				$(this).chromoselector('setColor','#f00');
			},
			update: function() {
				colorbg(this);
				postphp();
			},
			str2color: function (str) {
				return '#' + str;
			},
			color2str: function (color) {
				return color.getHexString().substring(1);
			}
		});
		$("#ch2").chromoselector({
			create: function() {
				colorbg(this);
				$(this).chromoselector('setColor','#f00');
			},
			update: function() {
				colorbg(this);
				postphp();
			},
			str2color: function (str) {
				return '#' + str;
			},
			color2str: function (color) {
				return color.getHexString().substring(1);
			}
		});
		$("#ch3").chromoselector({
			create: function() {
				colorbg(this);
				$(this).chromoselector('setColor','#f00');
			},
			update: function() {
				colorbg(this);
				postphp();
			},
			str2color: function (str) {
				return '#' + str;
			},
			color2str: function (color) {
				return color.getHexString().substring(1);
			}
		});
		$("#ch4").chromoselector({
			create: function() {
				colorbg(this);
				$(this).chromoselector('setColor','#f00');
			},
			update: function() {
				colorbg(this);
				postphp();
			},
			str2color: function (str) {
				return '#' + str;
			},
			color2str: function (color) {
				return color.getHexString().substring(1);
			}
		});
		$("#ch5").chromoselector({
			create: function() {
				colorbg(this);
				$(this).chromoselector('setColor','#f00');
			},
			update: function() {
				colorbg(this);
				postphp();
			},
			str2color: function (str) {
				return '#' + str;
			},
			color2str: function (color) {
				return color.getHexString().substring(1);
			}
		});
	});
</script>
</head>
<body>
	<a href="">
		<div id="header">
			157 Third Street
		</div>
	</a>
	<div id="channels">
		<form action="process.php" method="post">
			<div>
				<label for="ch1">Left</label>
				<input type="text" id="ch1" name="color" value="#ff0000" readonly="true" />
			</div>
			<div>
				<label for="ch2">Center</label>
				<input type="text" id="ch2" name="color" value="#ff0000" readonly="true" />
			</div>
			<div>
				<label for="ch3">Right</label>
				<input type="text" id="ch3" name="color" value="#ff0000" readonly="true" />
			</div>
			<br/>
			<div>
				<label for="ch4">Couch</label>
				<input type="text" id="ch4" name="color" value="#ff0000" readonly="true" />
			</div>
			<br/>
			<div>
				<label for="ch5">TV Stand</label>
				<input type="text" id="ch5" name="color" value="#ff0000" readonly="true" />
			</div>
		</form>	
	</div>
	<div id="simple-msg">
	</div>
</body>
</html>